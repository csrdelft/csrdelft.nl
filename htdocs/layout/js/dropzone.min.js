(function(){function a(b){var c=a.modules[b];if(!c){throw new Error('failed to require "'+b+'"')}if(!("exports" in c)&&typeof c.definition==="function"){c.client=c.component=true;c.definition.call(this,c.exports={},c);delete c.definition}return c.exports}a.modules={};a.register=function(b,c){a.modules[b]={definition:c}};a.define=function(c,b){a.modules[c]={exports:b}};a.register("component~emitter@1.1.2",function(c,d){d.exports=e;function e(f){if(f){return b(f)}}function b(g){for(var f in e.prototype){g[f]=e.prototype[f]}return g}e.prototype.on=e.prototype.addEventListener=function(g,f){this._callbacks=this._callbacks||{};(this._callbacks[g]=this._callbacks[g]||[]).push(f);return this};e.prototype.once=function(i,h){var g=this;this._callbacks=this._callbacks||{};function f(){g.off(i,f);h.apply(this,arguments)}f.fn=h;this.on(i,f);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(k,h){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var j=this._callbacks[k];if(!j){return this}if(1==arguments.length){delete this._callbacks[k];return this}var f;for(var g=0;g<j.length;g++){f=j[g];if(f===h||f.fn===h){j.splice(g,1);break}}return this};e.prototype.emit=function(k){this._callbacks=this._callbacks||{};var g=[].slice.call(arguments,1),j=this._callbacks[k];if(j){j=j.slice(0);for(var h=0,f=j.length;h<f;++h){j[h].apply(this,g)}}return this};e.prototype.listeners=function(f){this._callbacks=this._callbacks||{};return this._callbacks[f]||[]};e.prototype.hasListeners=function(f){return !!this.listeners(f).length}});a.register("dropzone",function(b,c){c.exports=a("dropzone/lib/dropzone.js")});a.register("dropzone/lib/dropzone.js",function(b,c){(function(){var k,f,e,h,d,i,n,m,l={}.hasOwnProperty,g=function(r,p){for(var o in p){if(l.call(p,o)){r[o]=p[o]}}function q(){this.constructor=r}q.prototype=p.prototype;r.prototype=new q();r.__super__=p.prototype;return r},j=[].slice;f=typeof Emitter!=="undefined"&&Emitter!==null?Emitter:a("component~emitter@1.1.2");n=function(){};k=(function(p){var q;g(o,p);o.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"];o.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(s,r){return r()},init:function(){return n},forceFallback:false,fallback:function(){var w,s,t,v,r,u;this.element.className=""+this.element.className+" dz-browser-not-supported";u=this.element.getElementsByTagName("div");for(v=0,r=u.length;v<r;v++){w=u[v];if(/(^| )dz-message($| )/.test(w.className)){s=w;w.className="dz-message";continue}}if(!s){s=o.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(s)}t=s.getElementsByTagName("span")[0];if(t){t.textContent=this.options.dictFallbackMessage}return this.element.appendChild(this.getFallbackForm())},resize:function(s){var u,t,r;u={srcX:0,srcY:0,srcWidth:s.width,srcHeight:s.height};t=s.width/s.height;u.optWidth=this.options.thumbnailWidth;u.optHeight=this.options.thumbnailHeight;if((u.optWidth==null)&&(u.optHeight==null)){u.optWidth=u.srcWidth;u.optHeight=u.srcHeight}else{if(u.optWidth==null){u.optWidth=t*u.optHeight}else{if(u.optHeight==null){u.optHeight=(1/t)*u.optWidth}}}r=u.optWidth/u.optHeight;if(s.height<u.optHeight||s.width<u.optWidth){u.trgHeight=u.srcHeight;u.trgWidth=u.srcWidth}else{if(t>r){u.srcHeight=s.height;u.srcWidth=u.srcHeight*r}else{u.srcWidth=s.width;u.srcHeight=u.srcWidth/r}}u.srcX=(s.width-u.srcWidth)/2;u.srcY=(s.height-u.srcHeight)/2;return u},drop:function(r){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(r){return this.element.classList.remove("dz-drag-hover")},dragenter:function(r){return this.element.classList.add("dz-drag-hover")},dragover:function(r){return this.element.classList.add("dz-drag-hover")},dragleave:function(r){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(u){var t,C,D,A,z,w,E,s,r,B,y,v,x;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){u.previewElement=o.createElement(this.options.previewTemplate.trim());u.previewTemplate=u.previewElement;this.previewsContainer.appendChild(u.previewElement);B=u.previewElement.querySelectorAll("[data-dz-name]");for(A=0,E=B.length;A<E;A++){t=B[A];t.textContent=u.name}y=u.previewElement.querySelectorAll("[data-dz-size]");for(z=0,s=y.length;z<s;z++){t=y[z];t.innerHTML=this.filesize(u.size)}if(this.options.addRemoveLinks){u._removeLink=o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");u.previewElement.appendChild(u._removeLink)}C=(function(F){return function(G){G.preventDefault();G.stopPropagation();if(u.status===o.UPLOADING){return o.confirm(F.options.dictCancelUploadConfirmation,function(){return F.removeFile(u)})}else{if(F.options.dictRemoveFileConfirmation){return o.confirm(F.options.dictRemoveFileConfirmation,function(){return F.removeFile(u)})}else{return F.removeFile(u)}}}})(this);v=u.previewElement.querySelectorAll("[data-dz-remove]");x=[];for(w=0,r=v.length;w<r;w++){D=v[w];x.push(D.addEventListener("click",C))}return x}},removedfile:function(r){var s;if(r.previewElement){if((s=r.previewElement)!=null){s.parentNode.removeChild(r.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(u,x){var t,w,s,v,r;if(u.previewElement){u.previewElement.classList.remove("dz-file-preview");u.previewElement.classList.add("dz-image-preview");v=u.previewElement.querySelectorAll("[data-dz-thumbnail]");r=[];for(w=0,s=v.length;w<s;w++){t=v[w];t.alt=u.name;r.push(t.src=x)}return r}},error:function(t,v){var u,x,s,w,r;if(t.previewElement){t.previewElement.classList.add("dz-error");if(typeof v!=="String"&&v.error){v=v.error}w=t.previewElement.querySelectorAll("[data-dz-errormessage]");r=[];for(x=0,s=w.length;x<s;x++){u=w[x];r.push(u.textContent=v)}return r}},errormultiple:n,processing:function(r){if(r.previewElement){r.previewElement.classList.add("dz-processing");if(r._removeLink){return r._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:n,uploadprogress:function(v,t,u){var w,y,s,x,r;if(v.previewElement){x=v.previewElement.querySelectorAll("[data-dz-uploadprogress]");r=[];for(y=0,s=x.length;y<s;y++){w=x[y];r.push(w.style.width=""+t+"%")}return r}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(r){if(r.previewElement){return r.previewElement.classList.add("dz-success")}},successmultiple:n,canceled:function(r){return this.emit("error",r,"Upload canceled.")},canceledmultiple:n,complete:function(r){if(r._removeLink){return r._removeLink.textContent=this.options.dictRemoveFile}},completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};q=function(){var t,s,v,w,x,u,r;w=arguments[0],v=2<=arguments.length?j.call(arguments,1):[];for(u=0,r=v.length;u<r;u++){s=v[u];for(t in s){x=s[t];w[t]=x}}return w};function o(t,s){var r,v,u;this.element=t;this.version=o.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&(this.element.nodeType!=null))){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}o.instances.push(this);this.element.dropzone=this;r=(u=o.optionsForElement(this.element))!=null?u:{};this.options=q({},this.defaultOptions,r,s!=null?s:{});if(this.options.forceFallback||!o.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((v=this.getExistingFallback())&&v.parentNode){v.parentNode.removeChild(v)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=o.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=o.getElements(this.options.clickable,"clickable")}}this.init()}o.prototype.getAcceptedFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(t.accepted){r.push(t)}}return r};o.prototype.getRejectedFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(!t.accepted){r.push(t)}}return r};o.prototype.getFilesWithStatus=function(t){var u,w,s,v,r;v=this.files;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];if(u.status===t){r.push(u)}}return r};o.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(o.QUEUED)};o.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(o.UPLOADING)};o.prototype.getActiveFiles=function(){var t,v,s,u,r;u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];if(t.status===o.UPLOADING||t.status===o.QUEUED){r.push(t)}}return r};o.prototype.init=function(){var t,x,w,v,s,u,r;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(o.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){w=(function(y){return function(){if(y.hiddenFileInput){document.body.removeChild(y.hiddenFileInput)}y.hiddenFileInput=document.createElement("input");y.hiddenFileInput.setAttribute("type","file");if((y.options.maxFiles==null)||y.options.maxFiles>1){y.hiddenFileInput.setAttribute("multiple","multiple")}y.hiddenFileInput.className="dz-hidden-input";if(y.options.acceptedFiles!=null){y.hiddenFileInput.setAttribute("accept",y.options.acceptedFiles)}y.hiddenFileInput.style.visibility="hidden";y.hiddenFileInput.style.position="absolute";y.hiddenFileInput.style.top="0";y.hiddenFileInput.style.left="0";y.hiddenFileInput.style.height="0";y.hiddenFileInput.style.width="0";document.body.appendChild(y.hiddenFileInput);return y.hiddenFileInput.addEventListener("change",function(){var A,B,C,z;B=y.hiddenFileInput.files;if(B.length){for(C=0,z=B.length;C<z;C++){A=B[C];y.addFile(A)}}return w()})}})(this);w()}this.URL=(u=window.URL)!=null?u:window.webkitURL;r=this.events;for(v=0,s=r.length;v<s;v++){t=r[v];this.on(t,this.options[t])}this.on("uploadprogress",(function(y){return function(){return y.updateTotalUploadProgress()}})(this));this.on("removedfile",(function(y){return function(){return y.updateTotalUploadProgress()}})(this));this.on("canceled",(function(y){return function(z){return y.emit("complete",z)}})(this));this.on("complete",(function(y){return function(z){if(y.getUploadingFiles().length===0&&y.getQueuedFiles().length===0){return setTimeout((function(){return y.emit("queuecomplete")}),0)}}})(this));x=function(y){y.stopPropagation();if(y.preventDefault){return y.preventDefault()}else{return y.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:(function(y){return function(z){return y.emit("dragstart",z)}})(this),dragenter:(function(y){return function(z){x(z);return y.emit("dragenter",z)}})(this),dragover:(function(y){return function(A){var z;try{z=A.dataTransfer.effectAllowed}catch(B){}A.dataTransfer.dropEffect="move"===z||"linkMove"===z?"move":"copy";x(A);return y.emit("dragover",A)}})(this),dragleave:(function(y){return function(z){return y.emit("dragleave",z)}})(this),drop:(function(y){return function(z){x(z);return y.drop(z)}})(this),dragend:(function(y){return function(z){return y.emit("dragend",z)}})(this)}}];this.clickableElements.forEach((function(y){return function(z){return y.listeners.push({element:z,events:{click:function(A){if((z!==y.element)||(A.target===y.element||o.elementInside(A.target,y.element.querySelector(".dz-message")))){return y.hiddenFileInput.click()}}}})}})(this));this.enable();return this.options.init.call(this)};o.prototype.destroy=function(){var r;this.disable();this.removeAllFiles(true);if((r=this.hiddenFileInput)!=null?r.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return o.instances.splice(o.instances.indexOf(this),1)};o.prototype.updateTotalUploadProgress=function(){var t,u,y,r,x,w,s,v;r=0;y=0;t=this.getActiveFiles();if(t.length){v=this.getActiveFiles();for(w=0,s=v.length;w<s;w++){u=v[w];r+=u.upload.bytesSent;y+=u.upload.total}x=100*r/y}else{x=100}return this.emit("totaluploadprogress",x,y,r)};o.prototype._getParamName=function(r){if(typeof this.options.paramName==="function"){return this.options.paramName(r)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+r+"]":"")}};o.prototype.getFallbackForm=function(){var s,r,u,t;if(s=this.getExistingFallback()){return s}u='<div class="dz-fallback">';if(this.options.dictFallbackText){u+="<p>"+this.options.dictFallbackText+"</p>"}u+='<input type="file" name="'+(this._getParamName(0))+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';r=o.createElement(u);if(this.element.tagName!=="FORM"){t=o.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');t.appendChild(r)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return t!=null?t:r};o.prototype.getExistingFallback=function(){var w,t,s,v,r,u;t=function(A){var y,z,x;for(z=0,x=A.length;z<x;z++){y=A[z];if(/(^| )fallback($| )/.test(y.className)){return y}}};u=["div","form"];for(v=0,r=u.length;v<r;v++){s=u[v];if(w=t(this.element.getElementsByTagName(s))){return w}}};o.prototype.setupEventListeners=function(){var u,t,x,w,s,v,r;v=this.listeners;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];r.push((function(){var y,z;y=u.events;z=[];for(t in y){x=y[t];z.push(u.element.addEventListener(t,x,false))}return z})())}return r};o.prototype.removeEventListeners=function(){var u,t,x,w,s,v,r;v=this.listeners;r=[];for(w=0,s=v.length;w<s;w++){u=v[w];r.push((function(){var y,z;y=u.events;z=[];for(t in y){x=y[t];z.push(u.element.removeEventListener(t,x,false))}return z})())}return r};o.prototype.disable=function(){var t,v,s,u,r;this.clickableElements.forEach(function(w){return w.classList.remove("dz-clickable")});this.removeEventListeners();u=this.files;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];r.push(this.cancelUpload(t))}return r};o.prototype.enable=function(){this.clickableElements.forEach(function(r){return r.classList.add("dz-clickable")});return this.setupEventListeners()};o.prototype.filesize=function(s){var r;if(s>=1024*1024*1024*1024/10){s=s/(1024*1024*1024*1024/10);r="TiB"}else{if(s>=1024*1024*1024/10){s=s/(1024*1024*1024/10);r="GiB"}else{if(s>=1024*1024/10){s=s/(1024*1024/10);r="MiB"}else{if(s>=1024/10){s=s/(1024/10);r="KiB"}else{s=s*10;r="b"}}}}return"<strong>"+(Math.round(s)/10)+"</strong> "+r};o.prototype._updateMaxFilesReachedClass=function(){if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};o.prototype.drop=function(t){var s,r;if(!t.dataTransfer){return}this.emit("drop",t);s=t.dataTransfer.files;if(s.length){r=t.dataTransfer.items;if(r&&r.length&&(r[0].webkitGetAsEntry!=null)){this._addFilesFromItems(r)}else{this.handleFiles(s)}}};o.prototype.paste=function(t){var r,s;if((t!=null?(s=t.clipboardData)!=null?s.items:void 0:void 0)==null){return}this.emit("paste",t);r=t.clipboardData.items;if(r.length){return this._addFilesFromItems(r)}};o.prototype.handleFiles=function(u){var t,v,s,r;r=[];for(v=0,s=u.length;v<s;v++){t=u[v];r.push(this.addFile(t))}return r};o.prototype._addFilesFromItems=function(t){var v,u,w,s,r;r=[];for(w=0,s=t.length;w<s;w++){u=t[w];if((u.webkitGetAsEntry!=null)&&(v=u.webkitGetAsEntry())){if(v.isFile){r.push(this.addFile(u.getAsFile()))}else{if(v.isDirectory){r.push(this._addFilesFromDirectory(v,v.name))}else{r.push(void 0)}}}else{if(u.getAsFile!=null){if((u.kind==null)||u.kind==="file"){r.push(this.addFile(u.getAsFile()))}else{r.push(void 0)}}else{r.push(void 0)}}}return r};o.prototype._addFilesFromDirectory=function(r,t){var s,u;s=r.createReader();u=(function(v){return function(w){var y,z,x;for(z=0,x=w.length;z<x;z++){y=w[z];if(y.isFile){y.file(function(A){if(v.options.ignoreHiddenFiles&&A.name.substring(0,1)==="."){return}A.fullPath=""+t+"/"+A.name;return v.addFile(A)})}else{if(y.isDirectory){v._addFilesFromDirectory(y,""+t+"/"+y.name)}}}}})(this);return s.readEntries(u,function(v){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(v):void 0:void 0})};o.prototype.accept=function(s,r){if(s.size>this.options.maxFilesize*1024*1024){return r(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(s.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!o.isValidFile(s,this.options.acceptedFiles)){return r(this.options.dictInvalidFileType)}else{if((this.options.maxFiles!=null)&&this.getAcceptedFiles().length>=this.options.maxFiles){r(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",s)}else{return this.options.accept.call(this,s,r)}}}};o.prototype.addFile=function(r){r.upload={progress:0,total:r.size,bytesSent:0};this.files.push(r);r.status=o.ADDED;this.emit("addedfile",r);this._enqueueThumbnail(r);return this.accept(r,(function(s){return function(t){if(t){r.accepted=false;s._errorProcessing([r],t)}else{r.accepted=true;if(s.options.autoQueue){s.enqueueFile(r)}}return s._updateMaxFilesReachedClass()}})(this))};o.prototype.enqueueFiles=function(t){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];this.enqueueFile(s)}return null};o.prototype.enqueueFile=function(r){if(r.status===o.ADDED&&r.accepted===true){r.status=o.QUEUED;if(this.options.autoProcessQueue){return setTimeout(((function(s){return function(){return s.processQueue()}})(this)),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};o.prototype._thumbnailQueue=[];o.prototype._processingThumbnail=false;o.prototype._enqueueThumbnail=function(r){if(this.options.createImageThumbnails&&r.type.match(/image.*/)&&r.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(r);return setTimeout(((function(s){return function(){return s._processThumbnailQueue()}})(this)),0)}};o.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),(function(r){return function(){r._processingThumbnail=false;return r._processThumbnailQueue()}})(this))};o.prototype.removeFile=function(r){if(r.status===o.UPLOADING){this.cancelUpload(r)}this.files=m(this.files,r);this.emit("removedfile",r);if(this.files.length===0){return this.emit("reset")}};o.prototype.removeAllFiles=function(v){var s,u,r,t;if(v==null){v=false}t=this.files.slice();for(u=0,r=t.length;u<r;u++){s=t[u];if(s.status!==o.UPLOADING||v){this.removeFile(s)}}return null};o.prototype.createThumbnail=function(s,t){var r;r=new FileReader;r.onload=(function(u){return function(){var v;v=document.createElement("img");v.onload=function(){var y,x,B,D,z,w,C,A;s.width=v.width;s.height=v.height;B=u.options.resize.call(u,s);if(B.trgWidth==null){B.trgWidth=B.optWidth}if(B.trgHeight==null){B.trgHeight=B.optHeight}y=document.createElement("canvas");x=y.getContext("2d");y.width=B.trgWidth;y.height=B.trgHeight;i(x,v,(z=B.srcX)!=null?z:0,(w=B.srcY)!=null?w:0,B.srcWidth,B.srcHeight,(C=B.trgX)!=null?C:0,(A=B.trgY)!=null?A:0,B.trgWidth,B.trgHeight);D=y.toDataURL("image/png");u.emit("thumbnail",s,D);if(t!=null){return t()}};return v.src=r.result}})(this);return r.readAsDataURL(s)};o.prototype.processQueue=function(){var s,u,r,t;u=this.options.parallelUploads;r=this.getUploadingFiles().length;s=r;if(r>=u){return}t=this.getQueuedFiles();if(!(t.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(t.slice(0,u-r))}else{while(s<u){if(!t.length){return}this.processFile(t.shift());s++}}};o.prototype.processFile=function(r){return this.processFiles([r])};o.prototype.processFiles=function(t){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];s.processing=true;s.status=o.UPLOADING;this.emit("processing",s)}if(this.options.uploadMultiple){this.emit("processingmultiple",t)}return this.uploadFiles(t)};o.prototype._getFilesWithXhr=function(t){var r,s;return s=(function(){var x,v,w,u;w=this.files;u=[];for(x=0,v=w.length;x<v;x++){r=w[x];if(r.xhr===t){u.push(r)}}return u}).call(this)};o.prototype.cancelUpload=function(v){var t,u,y,w,s,r,x;if(v.status===o.UPLOADING){u=this._getFilesWithXhr(v.xhr);for(y=0,s=u.length;y<s;y++){t=u[y];t.status=o.CANCELED}v.xhr.abort();for(w=0,r=u.length;w<r;w++){t=u[w];this.emit("canceled",t)}if(this.options.uploadMultiple){this.emit("canceledmultiple",u)}}else{if((x=v.status)===o.ADDED||x===o.QUEUED){v.status=o.CANCELED;this.emit("canceled",v);if(this.options.uploadMultiple){this.emit("canceledmultiple",[v])}}}if(this.options.autoProcessQueue){return this.processQueue()}};o.prototype.uploadFile=function(r){return this.uploadFiles([r])};o.prototype.uploadFiles=function(D){var S,Q,I,N,F,A,R,L,H,O,X,M,E,t,J,P,G,z,x,v,s,U,W,V,T,r,K,C,B,y,w,u;G=new XMLHttpRequest();for(z=0,U=D.length;z<U;z++){S=D[z];S.xhr=G}G.open(this.options.method,this.options.url,true);G.withCredentials=!!this.options.withCredentials;t=null;I=(function(Y){return function(){var ab,aa,Z;Z=[];for(ab=0,aa=D.length;ab<aa;ab++){S=D[ab];Z.push(Y._errorProcessing(D,t||Y.options.dictResponseError.replace("{{statusCode}}",G.status),G))}return Z}})(this);J=(function(Y){return function(ai){var ad,aa,ah,af,ae,ac,ab,Z,ag;if(ai!=null){aa=100*ai.loaded/ai.total;for(ah=0,ac=D.length;ah<ac;ah++){S=D[ah];S.upload={progress:aa,total:ai.total,bytesSent:ai.loaded}}}else{ad=true;aa=100;for(af=0,ab=D.length;af<ab;af++){S=D[af];if(!(S.upload.progress===100&&S.upload.bytesSent===S.upload.total)){ad=false}S.upload.progress=aa;S.upload.bytesSent=S.upload.total}if(ad){return}}ag=[];for(ae=0,Z=D.length;ae<Z;ae++){S=D[ae];ag.push(Y.emit("uploadprogress",S,aa,S.upload.bytesSent))}return ag}})(this);G.onload=(function(Y){return function(aa){var Z;if(D[0].status===o.CANCELED){return}if(G.readyState!==4){return}t=G.responseText;if(G.getResponseHeader("content-type")&&~G.getResponseHeader("content-type").indexOf("application/json")){try{t=JSON.parse(t)}catch(ab){aa=ab;t="Invalid JSON response from server."}}J();if(!((200<=(Z=G.status)&&Z<300))){return I()}else{return Y._finished(D,t,aa)}}})(this);G.onerror=(function(Y){return function(){if(D[0].status===o.CANCELED){return}return I()}})(this);E=(K=G.upload)!=null?K:G;E.onprogress=J;A={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){q(A,this.options.headers)}for(N in A){F=A[N];G.setRequestHeader(N,F)}Q=new FormData();if(this.options.params){C=this.options.params;for(X in C){P=C[X];Q.append(X,P)}}for(x=0,W=D.length;x<W;x++){S=D[x];this.emit("sending",S,G,Q)}if(this.options.uploadMultiple){this.emit("sendingmultiple",D,G,Q)}if(this.element.tagName==="FORM"){B=this.element.querySelectorAll("input, textarea, select, button");for(v=0,V=B.length;v<V;v++){L=B[v];H=L.getAttribute("name");O=L.getAttribute("type");if(L.tagName==="SELECT"&&L.hasAttribute("multiple")){y=L.options;for(s=0,T=y.length;s<T;s++){M=y[s];if(M.selected){Q.append(H,M.value)}}}else{if(!O||((w=O.toLowerCase())!=="checkbox"&&w!=="radio")||L.checked){Q.append(H,L.value)}}}}for(R=r=0,u=D.length-1;0<=u?r<=u:r>=u;R=0<=u?++r:--r){Q.append(this._getParamName(R),D[R],D[R].name)}return G.send(Q)};o.prototype._finished=function(t,v,w){var s,u,r;for(u=0,r=t.length;u<r;u++){s=t[u];s.status=o.SUCCESS;this.emit("success",s,v,w);this.emit("complete",s)}if(this.options.uploadMultiple){this.emit("successmultiple",t,v,w);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};o.prototype._errorProcessing=function(u,t,w){var s,v,r;for(v=0,r=u.length;v<r;v++){s=u[v];s.status=o.ERROR;this.emit("error",s,t,w);this.emit("complete",s)}if(this.options.uploadMultiple){this.emit("errormultiple",u,t,w);this.emit("completemultiple",u)}if(this.options.autoProcessQueue){return this.processQueue()}};return o})(f);k.version="3.10.2";k.options={};k.optionsForElement=function(o){if(o.getAttribute("id")){return k.options[e(o.getAttribute("id"))]}else{return void 0}};k.instances=[];k.forElement=function(o){if(typeof o==="string"){o=document.querySelector(o)}if((o!=null?o.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return o.dropzone};k.autoDiscover=true;k.discover=function(){var t,q,r,s,p,o;if(document.querySelectorAll){r=document.querySelectorAll(".dropzone")}else{r=[];t=function(y){var w,x,v,u;u=[];for(x=0,v=y.length;x<v;x++){w=y[x];if(/(^| )dropzone($| )/.test(w.className)){u.push(r.push(w))}else{u.push(void 0)}}return u};t(document.getElementsByTagName("div"));t(document.getElementsByTagName("form"))}o=[];for(s=0,p=r.length;s<p;s++){q=r[s];if(k.optionsForElement(q)!==false){o.push(new k(q))}else{o.push(void 0)}}return o};k.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];k.isBrowserSupported=function(){var p,q,s,o,r;p=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){p=false}else{r=k.blacklistedBrowsers;for(s=0,o=r.length;s<o;s++){q=r[s];if(q.test(navigator.userAgent)){p=false;continue}}}}else{p=false}return p};m=function(t,q){var r,s,p,o;o=[];for(s=0,p=t.length;s<p;s++){r=t[s];if(r!==q){o.push(r)}}return o};e=function(o){return o.replace(/[\-_](\w)/g,function(p){return p.charAt(1).toUpperCase()})};k.createElement=function(o){var p;p=document.createElement("div");p.innerHTML=o;return p.childNodes[0]};k.elementInside=function(p,o){if(p===o){return true}while(p=p.parentNode){if(p===o){return true}}return false};k.getElement=function(q,o){var p;if(typeof q==="string"){p=document.querySelector(q)}else{if(q.nodeType!=null){p=q}}if(p==null){throw new Error("Invalid `"+o+"` option provided. Please provide a CSS selector or a plain HTML element.")}return p};k.getElements=function(u,p){var w,r,o,t,s,x,q,v;if(u instanceof Array){o=[];try{for(t=0,x=u.length;t<x;t++){r=u[t];o.push(this.getElement(r,p))}}catch(y){w=y;o=null}}else{if(typeof u==="string"){o=[];v=document.querySelectorAll(u);for(s=0,q=v.length;s<q;s++){r=v[s];o.push(r)}}else{if(u.nodeType!=null){o=[u]}}}if(!((o!=null)&&o.length)){throw new Error("Invalid `"+p+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return o};k.confirm=function(o,q,p){if(window.confirm(o)){return q()}else{if(p!=null){return p()}}};k.isValidFile=function(r,o){var q,u,s,t,p;if(!o){return true}o=o.split(",");u=r.type;q=u.replace(/\/.*$/,"");for(t=0,p=o.length;t<p;t++){s=o[t];s=s.trim();if(s.charAt(0)==="."){if(r.name.toLowerCase().indexOf(s.toLowerCase(),r.name.length-s.length)!==-1){return true}}else{if(/\/\*$/.test(s)){if(q===s.replace(/\/.*$/,"")){return true}}else{if(u===s){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(o){return this.each(function(){return new k(this,o)})}}if(typeof c!=="undefined"&&c!==null){c.exports=k}else{window.Dropzone=k}k.ADDED="added";k.QUEUED="queued";k.ACCEPTED=k.QUEUED;k.UPLOADING="uploading";k.PROCESSING=k.UPLOADING;k.CANCELED="canceled";k.ERROR="error";k.SUCCESS="success";d=function(s){var q,o,y,r,t,x,p,w,u,v;p=s.naturalWidth;x=s.naturalHeight;o=document.createElement("canvas");o.width=1;o.height=x;y=o.getContext("2d");y.drawImage(s,0,0);r=y.getImageData(0,0,1,x).data;v=0;t=x;w=x;while(w>v){q=r[(w-1)*4+3];if(q===0){t=w}else{v=w}w=(t+v)>>1}u=w/x;if(u===0){return 1}else{return u}};i=function(w,p,u,t,v,q,y,x,o,s){var r;r=d(p);return w.drawImage(p,u,t,v,q,y,x,o,s/r)};h=function(q,u){var z,v,p,y,r,o,x,t,s;p=false;s=true;v=q.document;t=v.documentElement;z=(v.addEventListener?"addEventListener":"attachEvent");x=(v.addEventListener?"removeEventListener":"detachEvent");o=(v.addEventListener?"":"on");y=function(A){if(A.type==="readystatechange"&&v.readyState!=="complete"){return}(A.type==="load"?q:v)[x](o+A.type,y,false);if(!p&&(p=true)){return u.call(q,A.type||A)}};r=function(){var A;try{t.doScroll("left")}catch(B){A=B;setTimeout(r,50);return}return y("poll")};if(v.readyState!=="complete"){if(v.createEventObject&&t.doScroll){try{s=!q.frameElement}catch(w){}if(s){r()}}v[z](o+"DOMContentLoaded",y,false);v[z](o+"readystatechange",y,false);return q[z](o+"load",y,false)}};k._autoDiscoverFunction=function(){if(k.autoDiscover){return k.discover()}};h(window,k._autoDiscoverFunction)}).call(this)});if(typeof exports=="object"){module.exports=a("dropzone")}else{if(typeof define=="function"&&define.amd){define([],function(){return a("dropzone")})}else{this["Dropzone"]=a("dropzone")}}})();